; CareLink - PlatformIO Configuration (Unified)
; Patient Node (ESP8266), Nurse Node (ESP8266), Gateway (M5Stack ESP32)

[platformio]
default_envs = patient_node
description = CareLink - IoT Hospital Mesh Network

; ============================================================
; COMMON SETTINGS
; ============================================================
[env]
monitor_speed = 115200
upload_speed = 921600

build_flags =
    -I include
    -D MONITOR_SPEED=${env.monitor_speed}

; Librerie comuni (solo display OLED)
lib_deps =
    adafruit/Adafruit SSD1306 @ ^2.5.7
    adafruit/Adafruit GFX Library @ ^1.11.5
    adafruit/Adafruit BusIO @ ^1.14.1


; ============================================================
; PATIENT NODE (ESP8266 + MAX30102 + MAX30205)
; ============================================================
[env:patient_node]
platform = espressif8266
board = d1_mini
framework = arduino

build_src_filter = +<patient_node/>
build_flags =
    ${env.build_flags}
    -D DEVICE_PATIENT

lib_deps =
    ${env.lib_deps}
    sparkfun/SparkFun MAX30205 Human Body Temperature Sensor Library @ ^1.1.0
    ; Lâ€™algoritmo Maxim in /lib/MaximAlgorithm viene rilevato automaticamente


; ============================================================
; NURSE NODE (ESP8266 + OLED)
; ============================================================
[env:nurse_node]
platform = espressif8266
board = d1_mini
framework = arduino

build_src_filter = +<nurse_node/>
build_flags =
    ${env.build_flags}
    -D DEVICE_NURSE

lib_deps =
    ${env.lib_deps}


; ============================================================
; GATEWAY M5STACK (ESP32 + LCD + SD + ESP-NOW)
; ============================================================
[env:gateway_m5stack]
platform = espressif32
board = m5stack-core-esp32
framework = arduino

build_src_filter = +<gateway_m5stack_node/>
build_flags =
    ${env.build_flags}
    -D DEVICE_GATEWAY
    -D ARDUINO_M5STACK_CORE_ESP32

lib_deps =
    m5stack/M5Stack @ ^0.4.0
    bblanchon/ArduinoJson @ ^7.0.0
